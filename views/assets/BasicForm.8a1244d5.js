var ae=Object.defineProperty,re=Object.defineProperties;var ie=Object.getOwnPropertyDescriptors;var K=Object.getOwnPropertySymbols;var de=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable;var X=(e,s,o)=>s in e?ae(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o,v=(e,s)=>{for(var o in s||(s={}))de.call(s,o)&&X(e,o,s[o]);if(K)for(var o of K(s))ce.call(s,o)&&X(e,o,s[o]);return e},Y=(e,s)=>re(e,ie(s));var w=(e,s,o)=>new Promise((k,c)=>{var m=n=>{try{r(o.next(n))}catch(_){c(_)}},p=n=>{try{r(o.throw(n))}catch(_){c(_)}},r=n=>n.done?k(n.value):Promise.resolve(n.value).then(m,p);r((o=o.apply(e,s)).next())});import{e as I,h as pe,d as q,j as J,c as fe,_ as _e,k as me}from"./index.8d035c2e.js";import{u,A as Z,by as ge,d as be,bI as ye,bK as ve,bE as Be,e as C,i as ke,j as V,bs as Oe,f as Pe,V as G,o as d,a0 as y,Y as a,X as B,c as Q,r as W,bA as R,bF as Fe,bj as N,t as M,bL as x,ab as ee,F as L,bM as Se,$ as T,bG as je,bH as we,_ as Ce,ax as Ve,am as Ne,aw as Me,al as Ee,aW as he,aV as De,ak as Ue,aN as Re,ai as Te,aM as ze,aj as $e}from"./vendor.21d60ab8.js";import{p as $}from"./propTypes.13e00d90.js";function Ae(e){return e==="NInput"?"\u8BF7\u8F93\u5165":["NPicker","NSelect","NCheckbox","NRadio","NSwitch","NDatePicker","NTimePicker"].includes(e)?"\u8BF7\u9009\u62E9":""}function Ie({emit:e,getProps:s,formModel:o,getSchema:k,formElRef:c,defaultFormModel:m,loadingSub:p,handleFormValues:r}){function n(){return w(this,null,function*(){var l;return(l=u(c))==null?void 0:l.validate()})}function _(l){return w(this,null,function*(){l&&l.preventDefault(),p.value=!0;const{submitFunc:g}=u(s);if(g&&I(g)){yield g();return}if(!!u(c))try{return yield n(),p.value=!1,e("submit",o),!0}catch(F){return p.value=!1,!1}})}function O(){return w(this,null,function*(){var l;yield(l=u(c))==null?void 0:l.restoreValidation()})}function E(){return w(this,null,function*(){const{resetFunc:l,submitOnReset:g}=u(s);if(l&&I(l)&&(yield l()),!u(c))return;Object.keys(o).forEach(P=>{o[P]=u(m)[P]||null}),yield O();const F=r(Z(u(o)));e("reset",F),g&&(yield _())})}function h(){return u(c)?r(Z(u(o))):{}}function D(l){return w(this,null,function*(){const g=u(k).map(b=>b.field).filter(Boolean);Object.keys(l).forEach(b=>{const F=l[b];g.includes(b)&&(o[b]=F)})})}return{handleSubmit:_,validate:n,resetFields:E,getFieldsValue:h,clearValidate:O,setFieldsValue:D}}function Ge({defaultFormModel:e,getSchema:s,formModel:o}){function k(m){if(!pe(m))return{};const p={};for(const r of Object.entries(m)){let[,n]=r;const[_]=r;!_||q(n)&&n.length===0||I(n)||J(n)||(fe(n)&&(n=n.trim()),ge(p,_,n))}return p}function c(){const m=u(s),p={};m.forEach(r=>{const{defaultValue:n}=r;J(n)||(p[r.field]=n,o[r.field]=n)}),e.value=p}return{handleFormValues:k,initDefault:c}}const Qe={labelWidth:{type:[Number,String],default:80},schemas:{type:[Array],default:()=>[]},layout:{type:String,default:"inline"},inline:{type:Boolean,default:!1},size:{type:String,default:"medium"},labelPlacement:{type:String,default:"left"},isFull:{type:Boolean,default:!0},showActionButtonGroup:$.bool.def(!0),showResetButton:$.bool.def(!0),resetButtonOptions:Object,showSubmitButton:$.bool.def(!0),submitButtonOptions:Object,showAdvancedButton:$.bool.def(!0),submitButtonText:{type:String,default:"\u67E5\u8BE2"},resetButtonText:{type:String,default:"\u91CD\u7F6E"},gridProps:Object,giProps:Object,baseGridStyle:{type:Object},collapsed:{type:Boolean,default:!1},collapsedRows:{type:Number,default:1}};const We=be({name:"BasicUpload",components:{DownOutlined:ye,UpOutlined:ve,QuestionCircleOutlined:Be},props:v({},Qe),emits:["reset","submit","register"],setup(e,{emit:s,attrs:o}){const k=C({}),c=ke({}),m=C({}),p=C(null),r=C(null),n=C(!0),_=C(!1),O=C(!1),E=V(()=>Object.assign({size:e.size,type:"primary"},e.submitButtonOptions)),h=V(()=>Object.assign({size:e.size,type:"default"},e.resetButtonOptions));function D(i){var j;const S=(j=i.componentProps)!=null?j:{},U=i.component;return v({clearable:!0,placeholder:Ae(u(U))},S)}const l=V(()=>{const i=v(v({},e),u(m)),S={rules:{}};return(i.schemas||[]).forEach(j=>{j.rules&&q(j.rules)&&(S.rules[j.field]=j.rules)}),v(v({},i),u(S))}),g=V(()=>{const{layout:i}=u(l);return i==="inline"}),b=V(()=>{const{gridProps:i}=u(l);return Y(v({},i),{collapsed:g.value?n.value:!1,responsive:"screen"})}),F=V(()=>v(v(v({},o),e),u(l))),P=V(()=>{const i=u(p)||u(l).schemas;for(const S of i){const{defaultValue:U}=S;U&&(S.defaultValue=U)}return i}),{handleFormValues:A,initDefault:z}=Ge({getProps:l,defaultFormModel:k,getSchema:P,formModel:c}),{handleSubmit:t,validate:f,resetFields:H,getFieldsValue:te,clearValidate:ne,setFieldsValue:oe}=Ie({emit:s,getProps:l,formModel:c,getSchema:P,formElRef:r,defaultFormModel:k,loadingSub:_,handleFormValues:A});function le(){n.value=!n.value}function se(i){return w(this,null,function*(){m.value=me(u(m)||{},i)})}const ue={getFieldsValue:te,setFieldsValue:oe,resetFields:H,validate:f,clearValidate:ne,setProps:se,submit:t};return Oe(()=>P.value,i=>{u(O)||(i==null?void 0:i.length)&&(z(),O.value=!0)}),Pe(()=>{z(),s("register",ue)}),{formElRef:r,formModel:c,getGrid:b,getProps:l,getBindValue:F,getSchema:P,getSubmitBtnOptions:E,getResetBtnOptions:h,handleSubmit:t,resetFields:H,loadingSub:_,isInline:g,getComponentProps:D,unfoldToggle:le}}});function Le(e,s,o,k,c,m){const p=G("QuestionCircleOutlined"),r=Ce,n=Ve,_=Ne,O=Me,E=Ee,h=he,D=De,l=Ue,g=Re,b=Te,F=G("DownOutlined"),P=G("UpOutlined"),A=ze,z=$e;return d(),y(z,R(e.getBindValue,{model:e.formModel,ref:"formElRef"}),{default:a(()=>[B(A,je(we(e.getGrid)),{default:a(()=>[(d(!0),Q(L,null,W(e.getSchema,t=>(d(),y(g,R(t.giProps,{key:t.field}),{default:a(()=>[B(l,{label:t.label,path:t.field},Fe({default:a(()=>[t.slot?ee(e.$slots,t.slot,{key:0,model:e.formModel,field:t.field,value:e.formModel[t.field]},void 0,!0):t.component==="NCheckbox"?(d(),y(E,{key:1,value:e.formModel[t.field],"onUpdate:value":f=>e.formModel[t.field]=f},{default:a(()=>[B(O,null,{default:a(()=>[(d(!0),Q(L,null,W(t.componentProps.options,f=>(d(),y(_,{key:f.value,value:f.value,label:f.label},null,8,["value","label"]))),128))]),_:2},1024)]),_:2},1032,["value","onUpdate:value"])):t.component==="NRadioGroup"?(d(),y(D,{key:2,value:e.formModel[t.field],"onUpdate:value":f=>e.formModel[t.field]=f},{default:a(()=>[B(O,null,{default:a(()=>[(d(!0),Q(L,null,W(t.componentProps.options,f=>(d(),y(h,{key:f.value,value:f.value},{default:a(()=>[N(M(f.label),1)]),_:2},1032,["value"]))),128))]),_:2},1024)]),_:2},1032,["value","onUpdate:value"])):(d(),y(Se(t.component),R({key:3},e.getComponentProps(t),{value:e.formModel[t.field],"onUpdate:value":f=>e.formModel[t.field]=f,class:{isFull:t.isFull!=!1&&e.getProps.isFull}}),null,16,["value","onUpdate:value","class"])),t.suffix?ee(e.$slots,t.suffix,{key:4,model:e.formModel,field:t.field,value:e.formModel[t.field]},void 0,!0):T("",!0)]),_:2},[t.labelMessage?{name:"label",fn:a(()=>[N(M(t.label)+" ",1),B(n,{trigger:"hover",style:x(t.labelMessageStyle)},{trigger:a(()=>[B(r,{size:"18",class:"cursor-pointer text-gray-400"},{default:a(()=>[B(p)]),_:1})]),default:a(()=>[N(" "+M(t.labelMessage),1)]),_:2},1032,["style"])])}:void 0]),1032,["label","path"])]),_:2},1040))),128)),e.getProps.showActionButtonGroup?(d(),y(g,{key:0,span:e.isInline?"":24,suffix:!!e.isInline},{default:a(({overflow:t})=>[B(O,{align:"center",justify:e.isInline?"end":"start",style:x({"margin-left":`${e.isInline?12:e.getProps.labelWidth}px`})},{default:a(()=>[e.getProps.showSubmitButton?(d(),y(b,R({key:0},e.getSubmitBtnOptions,{onClick:e.handleSubmit,loading:e.loadingSub}),{default:a(()=>[N(M(e.getProps.submitButtonText),1)]),_:1},16,["onClick","loading"])):T("",!0),e.getProps.showResetButton?(d(),y(b,R({key:1},e.getResetBtnOptions,{onClick:e.resetFields}),{default:a(()=>[N(M(e.getProps.resetButtonText),1)]),_:1},16,["onClick"])):T("",!0),e.isInline&&e.getProps.showAdvancedButton?(d(),y(b,{key:2,type:"primary",text:"","icon-placement":"right",onClick:e.unfoldToggle},{icon:a(()=>[t?(d(),y(r,{key:0,size:"14",class:"unfold-icon"},{default:a(()=>[B(F)]),_:1})):(d(),y(r,{key:1,size:"14",class:"unfold-icon"},{default:a(()=>[B(P)]),_:1}))]),default:a(()=>[N(" "+M(t?"\u5C55\u5F00":"\u6536\u8D77"),1)]),_:2},1032,["onClick"])):T("",!0)]),_:2},1032,["justify","style"])]),_:1},8,["span","suffix"])):T("",!0)]),_:3},16)]),_:3},16,["model"])}var qe=_e(We,[["render",Le],["__scopeId","data-v-676ce85c"]]);export{qe as B};
