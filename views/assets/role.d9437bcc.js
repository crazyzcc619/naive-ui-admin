var X=Object.defineProperty;var B=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var E=(t,n,u)=>n in t?X(t,n,{enumerable:!0,configurable:!0,writable:!0,value:u}):t[n]=u,b=(t,n)=>{for(var u in n||(n={}))Y.call(n,u)&&E(t,u,n[u]);if(B)for(var u of B(n))I.call(n,u)&&E(t,u,n[u]);return t};var F=(t,n,u)=>new Promise((m,h)=>{var r=l=>{try{i(u.next(l))}catch(c){h(c)}},v=l=>{try{i(u.throw(l))}catch(c){h(c)}},i=l=>l.done?m(l.value):Promise.resolve(l.value).then(r,v);i((u=u.apply(t,n)).next())});import{T as C,B as J}from"./TableAction.c83c7f09.js";import{A as W,o as Z,q as ee}from"./index.8d035c2e.js";import{s as w,N as ue,d as te,Q as ne,e as s,a5 as ae,i as x,f as oe,o as le,c as se,a as A,X as a,Y as o,u as f,bP as ie,bj as y,t as T,aA as ce,_ as de,ai as re,b5 as _e,aw as pe,b3 as fe}from"./vendor.21d60ab8.js";import"./sortable.esm.81321d43.js";import"./useDesignSetting.9b7d21a8.js";import"./propTypes.13e00d90.js";import"./componentSetting.df76d574.js";import"./index.esm.82824a3c.js";function me(t){return W.request({url:"/role/list",method:"GET"})}const he=[{title:"id",key:"id"},{title:"\u89D2\u8272\u540D\u79F0",key:"name"},{title:"\u8BF4\u660E",key:"explain"},{title:"\u662F\u5426\u9ED8\u8BA4\u89D2\u8272",key:"isDefault",render(t){return w(ue,{type:t.isDefault?"success":"error"},{default:()=>t.isDefault?"\u662F":"\u5426"})}},{title:"\u521B\u5EFA\u65F6\u95F4",key:"create_date"}],ve={class:"n-layout-page-header"},ye=y(" \u9875\u9762\u6570\u636E\u4E3A Mock \u793A\u4F8B\u6570\u636E\uFF0C\u975E\u771F\u5B9E\u6570\u636E\u3002 "),ke=y(" \u6DFB\u52A0\u89D2\u8272 "),ge={class:"py-3 menu-list"},be=y("\u63D0\u4EA4"),je=te({setup(t){const n=ne(),u=s(null),m=ae(),h=s(),r=s(!1),v=s(!1),i=s(!1),l=s(""),c=s([]),d=s([]),_=s(["console","step-form"]),j=x({pageSize:5,name:"xiaoMa"}),K=x({width:250,title:"\u64CD\u4F5C",key:"action",fixed:"right",render(e){return w(C,{style:"button",actions:[{label:"\u83DC\u5355\u6743\u9650",onClick:q.bind(null,e),ifShow:()=>!0,auth:["basic_list"]},{label:"\u7F16\u8F91",onClick:L.bind(null,e),ifShow:()=>!0,auth:["basic_list"]},{label:"\u5220\u9664",icon:"ic:outline-delete-outline",onClick:U.bind(null,e),ifShow:()=>!0,auth:["basic_list"]}]})}}),M=e=>F(this,null,function*(){return b(b({},f(j)),e),yield me()});function R(e){console.log(e)}function S(){h.value.reload()}function N(e){e.preventDefault(),v.value=!0,u.value.validate(p=>{p?m.error("\u8BF7\u586B\u5199\u5B8C\u6574\u4FE1\u606F"):(m.success("\u65B0\u5EFA\u6210\u529F"),setTimeout(()=>{r.value=!1,S()})),v.value=!1})}function L(e){console.log("\u70B9\u51FB\u4E86\u7F16\u8F91",e),n.push({name:"basic-info",params:{id:e.id}})}function U(e){console.log("\u70B9\u51FB\u4E86\u5220\u9664",e),m.info("\u70B9\u51FB\u4E86\u5220\u9664")}function q(e){l.value=`\u5206\u914D ${e.name} \u7684\u83DC\u5355\u6743\u9650`,_.value=e.menu_keys,r.value=!0}function V(e){_.value=[_.value,...e]}function $(e){d.value=e}function H(){d.value.length?d.value=[]:d.value=c.value.map(e=>e.key)}function P(){i.value?(_.value=[],i.value=!1):(_.value=ee(c.value),i.value=!0)}return oe(()=>F(this,null,function*(){const e=yield Z();d.value=e.list.map(p=>p.key),c.value=e.list})),(e,p)=>{const D=ce,z=de,k=re,G=_e,O=pe,Q=fe;return le(),se("div",null,[A("div",ve,[a(D,{bordered:!1,title:"\u89D2\u8272\u6743\u9650\u7BA1\u7406"},{default:o(()=>[ye]),_:1})]),a(D,{bordered:!1,class:"mt-4 proCard"},{default:o(()=>[a(f(J),{columns:f(he),request:M,"row-key":g=>g.id,ref_key:"actionRef",ref:h,actionColumn:f(K),"onUpdate:checkedRowKeys":R},{tableTitle:o(()=>[a(k,{type:"primary"},{icon:o(()=>[a(z,null,{default:o(()=>[a(f(ie))]),_:1})]),default:o(()=>[ke]),_:1})]),action:o(()=>[a(f(C))]),_:1},8,["columns","row-key","actionColumn"])]),_:1}),a(Q,{show:r.value,"onUpdate:show":p[0]||(p[0]=g=>r.value=g),"show-icon":!1,preset:"dialog",title:l.value},{action:o(()=>[a(O,null,{default:o(()=>[a(k,{type:"info",ghost:"","icon-placement":"left",onClick:H},{default:o(()=>[y(" \u5168\u90E8"+T(d.value.length?"\u6536\u8D77":"\u5C55\u5F00"),1)]),_:1}),a(k,{type:"info",ghost:"","icon-placement":"left",onClick:P},{default:o(()=>[y(" \u5168\u90E8"+T(i.value?"\u53D6\u6D88":"\u9009\u62E9"),1)]),_:1}),a(k,{type:"primary",loading:v.value,onClick:N},{default:o(()=>[be]),_:1},8,["loading"])]),_:1})]),default:o(()=>[A("div",ge,[a(G,{"block-line":"",cascade:"",checkable:"","virtual-scroll":!0,data:c.value,expandedKeys:d.value,"checked-keys":_.value,style:{"max-height":"950px",overflow:"hidden"},"onUpdate:checkedKeys":V,"onUpdate:expandedKeys":$},null,8,["data","expandedKeys","checked-keys"])])]),_:1},8,["show","title"])])}}});export{je as default};
